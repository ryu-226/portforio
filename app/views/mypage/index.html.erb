<main class="max-w-4xl mx-auto my-8 p-6 pb-24 text-gray-700 bg-yellow-200 rounded-2xl shadow">
  <h1 class="text-2xl font-bold mb-6 text-center">マイページ</h1>
  <div class="flex flex-col md:flex-row gap-6">
    <!-- 左カラム：ユーザー情報・利用履歴 -->
    <div class="flex-1 space-y-6">
      <!-- ユーザー情報 -->
      <section class="bg-white/80 rounded-xl shadow p-4">
        <h2 class="font-semibold text-lg mb-2 text-primary">ユーザー情報</h2>
        <div class="mb-2"><span class="font-bold">ニックネーム：</span><span><%= @user.nickname %></span></div>
        <div class="mb-2"><span class="font-bold">メールアドレス：</span><span><%= @user.email %></span></div>
        <div class="mb-2"><span class="font-bold">登録日：</span><%= @user.created_at.strftime('%Y年%m月%d日') %></div>
        <div><span class="font-bold">会員歴：</span><%= @member_days %>日目</div>
        <%= button_to "ログアウトはこちら", destroy_user_session_path, method: :delete, form: { data: { turbo: false } }, class: "mt-2 text-red-500 hover:text-red-300 bg-transparent font-bold transition" %>
      </section>
      <!-- 利用履歴 -->
      <section class="bg-white/80 rounded-xl shadow p-4">
        <h2 class="font-semibold text-lg mb-2 text-primary">利用履歴</h2>
        <div class="mb-2"><span class="font-bold">ガチャを回した回数：</span><%= @gacha_count %>回</div>
      </section>
    </div>

    <!-- 右カラム：設定条件・通知設定 -->
    <div class="flex-1 space-y-6">
      <!-- 設定条件 -->
      <section class="bg-white/80 rounded-xl shadow p-4">
        <h2 class="font-semibold text-lg mb-2 text-primary">現在の設定条件</h2>
        <ul class="space-y-1 pl-2">
          <li><span class="font-bold">月の予算：</span><%= @budget&.monthly_budget %> 円</li>
          <li><span class="font-bold">抽選日数：</span><%= @budget&.draw_days %> 日間</li>
          <li><span class="font-bold">１日の最低金額：</span><%= @budget&.min_amount %> 円</li>
          <li><span class="font-bold">１日の最高金額：</span><%= @budget&.max_amount %> 円</li>
          <% if @remaining_days && @remaining_budget %>
            <div class="mb-3 px-4 py-2 bg-primary/10 rounded-lg text-primary font-bold text-base">
              今月の残り抽選日数: <%= @remaining_days %>日 /
              残り予算: <%= @remaining_budget %>円
            </div>
          <% end %>
        </ul>
        <% if @budget.nil? %>
          <p class="text-sm text-gray-400 mt-2">※まだ条件設定がありません</p>
        <% end %>
      </section>
    </div>
  </div>
  <!-- 設定変更ボタン -->
  <div class="mt-8">
    <% if @budget.present? %>
      <%= link_to '設定条件を変更する', edit_budget_path, class: "block w-full py-3 bg-primary text-white font-bold rounded-xl shadow hover:bg-primary/80 transition-all duration-300 text-center" %>
    <% else %>
      <%= link_to '設定条件を登録する', new_budget_path, class: "block w-full py-3 bg-red-500 text-white font-bold rounded-xl shadow hover:bg-red-400 transition-all duration-300 text-center" %>
    <% end %>
  </div>
</main>
