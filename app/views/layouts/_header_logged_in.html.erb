<!-- ログイン後ヘッダー -->
<header class="flex justify-between items-center px-2 md:px-8 py-2 bg-gray-100 border-b border-gray-300">
  <!-- 左側：ロゴ -->
  <div class="flex items-center">
    <%= link_to main_path do %>
      <%= image_tag "logo.png", alt: "めしガチャ ロゴ", class: "h-12 w-auto" %>
    <% end %>
  </div>
  <!-- 右側：マイページアイコン＋ハンバーガーメニュー -->
  <nav class="flex items-centar space-x-6">
    <!-- マイページアイコン -->
    <%= link_to mypage_path, class: "flex flex-col items-center p-2 rounded-xl hover:bg-gray-200 transition", title: "マイページ" do %>
      <i class="fa-solid fa-id-card text-3xl text-primary"></i>
    <% end %>
    <!-- ハンバーガーメニューアイコン -->
    <button id="menu-btn" type="button" class="p-2 rounded-xl hover:bg-gray-200 transition" aria-label="メニュー">
      <i class="fa-solid fa-bars text-3xl text-primary"></i>
    </button>
    <!-- ドロップダウンメニュー本体 -->
    <div id="menu-dropdown" class="absolute top-16 right-6 z-60 bg-gray-200 shadow-lg rounded-xl py-2 px-4 hidden">
      <%= button_to "ログアウト", destroy_user_session_path, method: :delete, form: { data: { turbo: false } }, class: "block w-full  font-bold text-left py-2 text-red-500 hover:text-red-300 bg-transparent border-none" %>
      <%= link_to "利用規約", terms_path, class: "block py-2 text-gray-700 hover:text-primary" %>
      <%= link_to "プライバシーポリシー", privacy_path, class: "block py-2 text-gray-700 hover:text-primary" %>
      <%= link_to "お問い合わせ", new_contact_path, class: "block py-2 text-gray-700 hover:text-primary" %>
    </div>
    </div>
  </nav>
</header>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const menuBtn = document.getElementById("menu-btn");
    const menuDropdown = document.getElementById("menu-dropdown");
    let isOpen = false;

    menuBtn.addEventListener("click", function(e) {
      e.stopPropagation();
      isOpen = !isOpen;
      menuDropdown.classList.toggle("hidden", !isOpen);
    });

    // メニュー外クリックで閉じる
    document.addEventListener("click", function(e) {
      if (isOpen && !menuDropdown.contains(e.target) && e.target !== menuBtn) {
        menuDropdown.classList.add("hidden");
        isOpen = false;
      }
    });
  });
</script>
